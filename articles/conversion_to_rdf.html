<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Convert Ontology to RDF • ontologics</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Convert Ontology to RDF">
<meta property="og:description" content="ontologics">
<meta property="og:image" content="http://luckinet.github.io/ontologics/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ontologics</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/create_an_ontology.html">Create an ontology</a>
</li>
<li>
  <a href="../articles/map_new_concepts.html">Map new concepts</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://www.twitter.com/DerEhrmann" class="external-link">
    <span class="fa fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/luckinet/ontologics" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Convert Ontology to RDF</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/luckinet/ontologics/blob/HEAD/vignettes/conversion_to_rdf.Rmd" class="external-link"><code>vignettes/conversion_to_rdf.Rmd</code></a></small>
      <div class="hidden name"><code>conversion_to_rdf.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/luckinet/ontologics" class="external-link">ontologics</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>To export the ontology as RDF just call <code><a href="../reference/export_as_rdf.html">export_as_rdf()</a></code>.
The ontology and the file name have to be specified. The format is
optional and defaults to RDF-Turtle. Available formats are
<code>rdfxml</code>, <code>nquads</code>, <code>ntriples</code>,
<code>turtle</code> or <code>jsonld</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ontoDir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"crops.rds"</span>, package <span class="op">=</span> <span class="st">"ontologics"</span><span class="op">)</span></span>
<span><span class="va">onto</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_ontology.html">load_ontology</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">ontoDir</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/export_as_rdf.html">export_as_rdf</a></span><span class="op">(</span>ontology <span class="op">=</span> <span class="va">onto</span>, filename <span class="op">=</span> <span class="st">"onto.ttl"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="conversion-rational">Conversion Rational<a class="anchor" aria-label="anchor" href="#conversion-rational"></a>
</h2>
<p>Conversion to an RDF (Resource Description Framework) serialization
is integrated to render the built ontologies interoperable with the
Semantic Web. This document gives a short introduction to the RDF
concepts we need for the conversion. For a more comprehensive
introduction the article <a href="http://eprints.gla.ac.uk/101484/" class="external-link">RDF,
the semantic web, Jordan, Jordan and Jordan</a> is recommended.</p>
<div class="section level3">
<h3 id="ids-in-rdf-prefixes">IDs in RDF / Prefixes<a class="anchor" aria-label="anchor" href="#ids-in-rdf-prefixes"></a>
</h3>
<p>The IDs that are used in an RDF database have to be IRIs (IRIs are a
superset of URIs, which are in turn a superset of URLs). Typically, the
structure of URLs is used. In this package, we generate the RDF-IDs of
the concepts in the ontology by concatenating a <em>prefix</em>
(specified as <code>uri_prefix</code> in some of the functions) with
internal package IDs. The homepage of the example ontology we created in
<a href="create_an_ontology.html">create an ontology</a> is
<code>http:[slash][slash]www[dot]luckinet[dot]org</code>. The internal
ID of the concept with the label
<code>Naturally Regenerating Forest</code> in this ontology is
<code>.08.02</code>. The resulting IRI-ID for this concept therefore
resolves to
<code>https:[slash][slash]www[dot]luckinet[dot]org#.08.02</code>. As you
see, <code>#</code> is used as concatenation symbol. Another widely used
option is <code>/</code>, in case the <code>homepage</code> string ends
with <code>/</code> or <code>#</code>, which is then used by
default.</p>
<p>The so-built IRI-IDs do not have to resolve to an actual resource on
the Web, but it is highly recommended. If not possible, at least the
prefix should resemble an actual Web page, as it is the case for the
example.
<!-- (see [publishing an ontology](publishing_an_ontology.html)) --></p>
</div>
<div class="section level3">
<h3 id="rdf">RDF<a class="anchor" aria-label="anchor" href="#rdf"></a>
</h3>
<p>In RDF every information is stored as a sentence like structure
called triple. A triple has a subject, a predicate and an object. Every
triple states a fact about it’s subject and ends this statement with a
period (<code>.</code>). The fact that the concept with the ID
<code>&lt;https://www.luckinet.org/.08.02&gt;</code> has the label
<code>"Naturally Regenerating Forest"</code> in RDF actually reads:</p>
<pre><code>@prefix luckinet: &lt;https://www.luckinet.org/&gt; .
@prefix skos: &lt;http://www.w3.org/2004/02/skos/core#&gt; .

luckinet:.08.02 skos:prefLabel "Naturally Regenerating Forest" .</code></pre>
<p>In this case <code>luckinet:.08.02</code> is the subject,
<code>skos:prefLabel</code> is the predicate and
<code>"Naturally Regenerating Forest"</code> is the object. Every
subject and predicate in an RDF triple have to be resources (that means
they are represented by an IRI); whilst object can be either a resource
or a literal value (as in the example above). The definition of the IRI
<code>skos:prefLabel</code> (<a href="https://www.w3.org/2004/02/skos/core#prefLabel" class="external-link uri">https://www.w3.org/2004/02/skos/core#prefLabel</a>) is given
by the triple:</p>
<pre><code>skos:prefLabel skos:definition "The preferred lexical label for a resource, in a given language." .</code></pre>
<p>We can add some more facts from our ontology to the RDF database. The
RDF representation that we use here is called RDF-Turtle. In RDF-Turtle
a semicolon at the end of a triple indicates that the next statement
also refers to the same subject (which is left out thereafter). A comma
indicates that the next statement refers to the same subject and
predicate.</p>
<pre><code>@prefix luckinet: &lt;https://www.luckinet.org/&gt; .
@prefix skos: &lt;http://www.w3.org/2004/02/skos/core#&gt; .
@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .

luckinet:.08.02 skos:prefLabel "Naturally Regenerating Forest" ;    
    skos:broader luckinet:.08 ;
    rdf:type luckinet:land-use ;
    skos:definition "Forest that regenerates naturally ..." . 

luckinet:.08 skos:prefLabel "Forests";
    rdf:type luckinet:landcover;

luckinet:land-use skos:prefLabel "Land-Use";
    skos:broader luckinet:landcover .

luckinet:landcover skos:prefLabel "Landcover" .</code></pre>
<p>RDF is based on the open world assumption: in the above case that
means that not stating a definition of the concept <code>.08</code> does
not mean that no definition exists; it’s simply not known whether a
definition exists.</p>
</div>
<div class="section level3">
<h3 id="rds-2-rdf">RDS 2 RDF<a class="anchor" aria-label="anchor" href="#rds-2-rdf"></a>
</h3>
<p>Internally, the ontology is stored in an RDS objects that holds five
tables (see <a href="ontology_database_description.html">ontology
database description</a>). If we take a look at subsets of the two
particular tables <em>harmonised concepts</em> and <em>harmonised
classes</em> from the ontology, we see that the first column holds an ID
and in the other columns state facts about this ID:</p>
<p><strong>Concept table:</strong></p>
<table class="table">
<colgroup>
<col width="20%">
<col width="20%">
<col width="20%">
<col width="20%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th align="left">ID</th>
<th align="left">label</th>
<th align="left">description</th>
<th align="left">class</th>
<th align="left">has_broader</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">.08</td>
<td align="left">Forests</td>
<td align="left">NA</td>
<td align="left">landcover</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">.08.02</td>
<td align="left">Naturally Regenerating Forest</td>
<td align="left">Forest that regenerates naturally (this description
needs revision)</td>
<td align="left">land-use</td>
<td align="left">.08</td>
</tr>
</tbody>
</table>
<p><strong>Class table:</strong></p>
<table class="table">
<thead><tr class="header">
<th align="left">ID</th>
<th align="left">label</th>
<th align="left">description</th>
<th align="left">has_broader</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">landcover</td>
<td align="left">Landcover</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">land-use</td>
<td align="left">Land-Use</td>
<td align="left">NA</td>
<td align="left">landcover</td>
</tr>
</tbody>
</table>
<p>RDF Triples for both tables can be generated according to the
following scheme:</p>
<pre><code>&lt;Column[ID].at(index).value&gt; &lt;Column[...].columnName&gt; &lt;Column[...].at(index).value&gt; .</code></pre>
<p>In a particular row, the ID always represents the subject, the column
names represent the predicates and the according values of these columns
the objects. That means, for a row in a table with five columns
(including an ID column), potentially four triples can be constructed;
one per non-ID-column that holds a value for this row. Converting both
tables to a single RDF-Turtle-pseudocode leads to:</p>
<pre><code>.08 label "Forests" ;
    class landcover .

.08.02 label "Naturally Regenerating Forest" ;
    definition "Forest that regenerates naturally (this description needs revision)" ;
    class land-use ;
    has_broader .08 .

landcover label "Landcover" .

land-use label "Land-Use" ;
    has_broader landcover .</code></pre>
<p>And with that we are back at the example from the section above.</p>
<p>Of course, in reality things are a little more complicated. Looking
at the pseudocode above, we clearly see that the “IDs” are not IRIs by
any means. They still have to be concatenated with their according
prefix. The prefixes are stored in another table called sources, so we
have to use the IDs as foreign keys to build the IRIs. Since this
vignette’s intention is to give an overview over the concepts behind the
conversion, we won’t go into any more detail here. Please feel
encouraged to dive into the source code of
<code>export_as_rdf.R</code>.</p>
<!-- TODO: (or rather possibly interesting) XKOS -->
</div>
<div class="section level3">
<h3 id="skos">SKOS<a class="anchor" aria-label="anchor" href="#skos"></a>
</h3>
<p>SKOS is shorthand for <a href="https://www.w3.org/TR/skos-primer/" class="external-link">Simple Knowledge Organization
System</a>. It is a lightweight RDF vocabulary that can be used to
express knowledge organisation systems (KOS) as RDF and thus make them
interoperable with the Semantic Web. Popular KOS, such as <a href="https://agrovoc.uniroma2.it/agrovoc/agrovoc/en/" class="external-link">FAO Agrovoc</a>
or the <a href="https://vocabularies.unesco.org/browser/thesaurus/en/" class="external-link">UNESCO
Thesaurus</a> are expressed with SKOS.</p>
<p>We’ll now try to give a short introduction to the parts of SKOS that
we use in this package; please also visit the <a href="https://www.w3.org/TR/skos-reference/" class="external-link">SKOS reference page</a>. It
is assumed that the <a href="ontology_database_description.html">ontology database
description</a> document was read. From the SKOS vocabulary, we mainly
use the <a href="https://www.w3.org/TR/skos-reference/#semantic-relations" class="external-link"><strong>semantic
relations</strong></a> and the <a href="https://www.w3.org/TR/skos-reference/#mapping" class="external-link"><strong>mapping
properties</strong></a>.</p>
<p>The SKOS <strong>semantic relations</strong> are intended to be used
to built links between concepts that are part of the expressed KOS. For
this package, that means that they are only permitted between harmonised
concepts. The semantic relations that are required here are
<code>skos:broader</code> and <code>skos:narrower</code>. The Triple
<code>ontology:concept_A skos:broader ontology:concept_B</code> states
that <em>concept A</em> has the broader concept <em>concept B</em>. Both
relations are inverse to each other. That means that if
<code>ontology:concept_A skos:broader ontology:concept_B</code> then
<code>ontology:concept_B skos:narrower ontology:concept_A</code>. For
this very reason, we only describe one of both relations in the
ontologies tables; <code>skos:broader</code>. In this package, the
relation is indicated with <code>has_broader</code> in the tables
<em>harmonised classes</em> and <em>harmonised concepts</em>.</p>
<p>The SKOS <strong>mapping properties</strong> are similar to the
semantic relations, but they are used to construct relations between
concepts that are part of the expressed KOS and concepts that are
<strong>not</strong> part of it. For this package that means all
relations between harmonised classes or concepts and external classes or
concepts have to be described with the SKOS mapping properties. We
support four of the SKOS mapping relations:
<code>skos:narrowMatch</code> and <code>skos:broadMatch</code> have
similar meanings as the semantic relations introduces above. The
property <code>skos:closeMatch</code> indicates “two concepts that are
sufficiently similar that they can be used interchangeably in
<strong>some</strong> information retrieval applications” and
<code>skos:exactMatch</code> denotes “a high degree of confidence that
the concepts can be used interchangeably across a wide range of
information retrieval applications”, thus it allows transitive closure.
In this package, the mapping properties are indicated with
<code>has_narrow_match</code>, <code>has_broad_match</code>,
<code>has_close_match</code> and <code>has_exact_match</code> in the
tables <em>harmonised classes</em> and <em>harmonised concepts</em>.</p>
<p>Finally, SKOS provides the property <code>skos:inScheme</code> that
denotes that a concept is part of some KOS. In this package, the table
<em>sources</em> administers these KOS’ (<code>skos:Scheme</code>s).
Each concept and class in this package is assigned to a certain scheme
listed in the <em>sources</em> table. For external concepts and classes
the column <code>has_source</code> indicates that scheme. Harmonized
concepts and classes are part of the harmonized scheme, which is
typically described in the first row of the <em>sources</em> table.</p>
<!-- TODO: -->
<div class="section level4">
<h4 id="structure-of-exported-skos">Structure of exported SKOS<a class="anchor" aria-label="anchor" href="#structure-of-exported-skos"></a>
</h4>
<p>In the resulting document, both the harmonized classes and concepts
are explicitly instantiated as SKOS-Concepts. The harmonized classes are
additionally explicitly instantiated as RDF-Classes. Every harmonized
concept is instantiated as an object of its according harmonized class.
External concepts and classes are not explicitly instantiated as
anything, although the use of the SKOS mapping properties allows to
infer that they are instances of SKOS-Concept.</p>
<p>Harmonized concepts relate to other harmonized concepts via the SKOS
semantic relation <code>skos:broader</code>. Harmonized classes relate
to other harmonized classes via the SKOS semantic relation
<code>skos:broader</code>. Each harmonized concept that has a value in
the <code>class</code> column is instantiated as a member of this class
using <code>rdf:type</code>.</p>
<p>Harmonized Concepts relate to external concepts via the SKOS mapping
properties. Harmonized Classes relate to external Classes via the SKOS
mapping properties.</p>
<p><img src="onto.png" alt="onto_schematic" width="100%"></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://orcid.org/0000-0002-2958-0796" class="external-link">Steffen Ehrmann</a>, <a href="https://orcid.org/0000-0001-8637-9071" class="external-link">Arne Rümmler</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
